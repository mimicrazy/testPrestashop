<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Doc API Prestashop</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" href="css/jquery-ui.css" type="text/css"></link><link rel="stylesheet" href="css/docblox/jquery-ui-1.8.16.custom.css" type="text/css"></link><link rel="stylesheet" href="css/jquery.treeview.css" type="text/css"></link><link rel="stylesheet" href="css/theme.css" type="text/css"></link><script type="text/javascript" src="js/jquery-1.4.2.min.js"></script><script type="text/javascript" src="js/jquery-ui-1.8.2.custom.min.js"></script><script type="text/javascript" src="js/jquery.cookie.js"></script><script type="text/javascript" src="js/jquery.treeview.js"></script><script type="text/javascript">
            $(document).ready(function() {
                $(".filetree").treeview({
                    collapsed: true,
                    persist: "cookie"
                });

                $("#accordion").accordion({
                    collapsible: true,
                    autoHeight:  false,
                    fillSpace:   true
                });

                $(".tabs").tabs();
            });
        </script></head><body><div xmlns="" id="content">
<script xmlns:dbx="http://docblox-project.org/xsl/functions">

      function filterElements()
      {
        inherited = !$('#show-inherited').hasClass('deselected');
        public    = !$('#show-public').hasClass('deselected');
        protected = !$('#show-protected').hasClass('deselected');
        private   = !$('#show-private').hasClass('deselected');

        $('div.public').each(function(index, val) {
            $(val).toggle(public && !($(val).hasClass('inherited_from') && !inherited));
        });
        $('div.protected').each(function(index, val) {
            $(val).toggle(protected && !($(val).hasClass('inherited_from') && !inherited));
        });
        $('div.private').each(function(index, val) {
            $(val).toggle(private && !($(val).hasClass('inherited_from') && !inherited));
        });
      }

      $(document).ready(function() {
        $('a.gripper').click(function() {
            $(this).nextAll('div.code-tabs').slideToggle();
            $(this).children('img').toggle();
            return false;
        });

        $('div.method code span.highlight,div.function code span.highlight,div.constant code span.highlight,div.property code span.highlight').css('cursor', 'pointer');

        $('div.method code span.highlight,div.function code span.highlight,div.constant code span.highlight,div.property code span.highlight').click(function() {
            $(this).parent().nextAll('div.code-tabs').slideToggle();
            $(this).parent().prevAll('a.gripper').children('img').toggle();
            return false;
        });

        $('div.code-tabs').hide();
        $('a.gripper').show();
        $('div.code-tabs:empty').prevAll('a.gripper').html('');

        $('#show-public, #show-protected, #show-private, #show-inherited')
            .css('cursor', 'pointer')
            .click(function(){
                $(this).toggleClass('deselected');
                if ($(this).hasClass('deselected')) {
                  $(this).fadeTo('fast', '0.4');
                } else {
                  $(this).fadeTo('fast', '1.0');
                }
                filterElements();
                return false;
            });
        $('#show-protected, #show-private').click();

        // add the sliding behaviour to the file navigation and show it
        // it is initially hidden for non-JS users.
        $("#file-nav-box").show().hover(function() {
            $("#file-nav-container").slideDown(400);
        }, function() {
            $("#file-nav-container").slideUp(400);
        });
      });

      
    </script><h1 xmlns:dbx="http://docblox-project.org/xsl/functions" class="file">tools/swift/Swift/Plugin/FileEmbedder.php</h1>
<div xmlns:dbx="http://docblox-project.org/xsl/functions" id="file-nav-box">
<div id="file-nav-options">
              Show:
              <img src="images/icons/visibility_public.png" id="show-public"><img src="images/icons/visibility_protected.png" id="show-protected"><img src="images/icons/visibility_private.png" id="show-private"><span class="attribute" id="show-inherited">inherited</span>
</div>
<div id="file-nav-container">
<ul id="file-nav"><li>
<a href="#classes"><img src="images/icons/class.png" height="14">
                          Classes
                      </a><ul><li><a href="#%5CSwift_Plugin_FileEmbedder">\Swift_Plugin_FileEmbedder</a></li></ul>
</li></ul>
<div style="clear: left;"></div>
</div>
<div id="file-nav-tab">
              Table of Contents
          </div>
</div>
<a xmlns:dbx="http://docblox-project.org/xsl/functions" name="top" class="anchor"></a><div id="file-description">
<p xmlns:dbx="http://docblox-project.org/xsl/functions" class="short-description">A Swift Mailer plugin to download remote images and stylesheets then embed them.</p>
<div xmlns:dbx="http://docblox-project.org/xsl/functions" class="long-description"><p>This also embeds local files from disk.
Please read the LICENSE file</p>
</div>
</div>
<dl class="file-info">
<dt xmlns:dbx="http://docblox-project.org/xsl/functions">Author</dt>
<dd xmlns:dbx="http://docblox-project.org/xsl/functions">
<a href="mailto:chris@w3style.co.uk">Chris Corbyn</a>
         
    </dd>
<dt xmlns:dbx="http://docblox-project.org/xsl/functions">License</dt>
<dd xmlns:dbx="http://docblox-project.org/xsl/functions">
<a href="http://opensource.org/licenses/LGPL-3.0">GNU Lesser General Public License</a>
         
    </dd>
<dt xmlns:dbx="http://docblox-project.org/xsl/functions">Package</dt>
<dd xmlns:dbx="http://docblox-project.org/xsl/functions">Swift_Plugin
         
    </dd>
</dl>
<a name="classes" class="anchor"></a><a xmlns:dbx="http://docblox-project.org/xsl/functions" id="\Swift_Plugin_FileEmbedder" class="anchor"></a><h2 xmlns:dbx="http://docblox-project.org/xsl/functions" class="class">\Swift_Plugin_FileEmbedder<div class="to-top"><a href="#top">jump to top</a></div>
</h2>
<div xmlns:dbx="http://docblox-project.org/xsl/functions" class="class">
<small class="package"><b>Package: </b>Swift\Plugin</small><p class="short-description">Swift FileEmbedder Plugin to embed remote files.</p>
<div class="long-description"><p>Scans a Swift_Message instance for remote files and then embeds them before sending.
This also embeds local files from disk.</p>
</div>
<dl class="class-info">
<dt>Implements</dt>
<dd><a href="db_tools_swift_Swift_Events_BeforeSendListener.html#%5CSwift_Events_BeforeSendListener">\Swift_Events_BeforeSendListener</a></dd>
<dt>Author</dt>
<dd>
<a href="mailto:chris@w3style.co.uk">Chris Corbyn</a>
         
    </dd>
</dl>
<h3>Properties</h3>
<div>
<a id="\Swift_Plugin_FileEmbedder::$definitions" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/property.png" alt="Property"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">array
                 <span class="highlight">$definitions</span>= 'array(
    "img" =&gt; array(
      "attributes" =&gt; array("src")'
                </code><div class="description">
<p class="short-description">(X)HTML tag defintions listing allowed attributes and extensions.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Default value</strong><code>array(
    "img" =&gt; array(
      "attributes" =&gt; array("src")</code><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd>array</dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::$embedLocalFiles" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/property.png" alt="Property"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">boolean
                 <span class="highlight">$embedLocalFiles</span>= 'true'
                </code><div class="description">
<p class="short-description">True if local files will be embedded.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Default value</strong><code>true</code><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd>boolean</dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::$embedRemoteFiles" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/property.png" alt="Property"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">boolean
                 <span class="highlight">$embedRemoteFiles</span>= 'true'
                </code><div class="description">
<p class="short-description">True if remote files will be embedded.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Default value</strong><code>true</code><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd>boolean</dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::$localFilePatternFormat" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/property.png" alt="Property"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">string
                 <span class="highlight">$localFilePatternFormat</span>= '"~
    (&lt;(?:%s)\\s+[^&gt;]*?                               #Opening tag followed by (possible) attributes
    (?:%s)=((?:\"|')?))                              #Permitted attributes followed by (possible) quotation marks
    ((?:/|[a-z]:\\\\|[a-z]:/)[\\x01-\\x7F]*?(?:%s)?) #Local, absolute path
    (\\2[^&gt;]*&gt;)                                      #Remaining attributes followed by end of tag
    ~isx"'
                </code><div class="description">
<p class="short-description">A PCRE regexp which will be passed via sprintf() to produce a complete pattern.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Default value</strong><code>"~
    (&lt;(?:%s)\\s+[^&gt;]*?                               #Opening tag followed by (possible) attributes
    (?:%s)=((?:\"|')?))                              #Permitted attributes followed by (possible) quotation marks
    ((?:/|[a-z]:\\\\|[a-z]:/)[\\x01-\\x7F]*?(?:%s)?) #Local, absolute path
    (\\2[^&gt;]*&gt;)                                      #Remaining attributes followed by end of tag
    ~isx"</code><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd>string</dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::$mimeTypes" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/property.png" alt="Property"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">array
                 <span class="highlight">$mimeTypes</span>= 'array(
    "gif" =&gt; "image/gif"'
                </code><div class="description">
<p class="short-description">A list of extensions mapping to their usual MIME types.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Default value</strong><code>array(
    "gif" =&gt; "image/gif"</code><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd>array</dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::$protocols" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/property.png" alt="Property"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">array
                 <span class="highlight">$protocols</span>= 'array(
    "http" =&gt; "http"'
                </code><div class="description">
<p class="short-description">Protocols which may be used to download a remote file.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Default value</strong><code>array(
    "http" =&gt; "http"</code><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd>array</dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::$registeredFiles" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/property.png" alt="Property"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">array
                 <span class="highlight">$registeredFiles</span>= 'array()'
                </code><div class="description">
<p class="short-description">Child IDs of files already embedded.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Default value</strong><code>array()</code><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd>array</dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::$remoteFilePatternFormat" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/property.png" alt="Property"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">string
                 <span class="highlight">$remoteFilePatternFormat</span>= '"~
    (&lt;(?:%s)\\s+[^&gt;]*?                   #Opening tag followed by (possible) attributes
    (?:%s)=((?:\"|')?))                  #Permitted attributes followed by (possible) quotation marks
    ((?:%s)://[\\x01-\\x7F]*?(?:%s)?)    #Remote URL (matching a permitted protocol)
    (\\2[^&gt;]*&gt;)                          #Remaining attributes followed by end of tag
    ~isx"'
                </code><div class="description">
<p class="short-description">A PCRE regexp which will be passed via sprintf() to produce a complete pattern.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Default value</strong><code>"~
    (&lt;(?:%s)\\s+[^&gt;]*?                   #Opening tag followed by (possible) attributes
    (?:%s)=((?:\"|')?))                  #Permitted attributes followed by (possible) quotation marks
    ((?:%s)://[\\x01-\\x7F]*?(?:%s)?)    #Remote URL (matching a permitted protocol)
    (\\2[^&gt;]*&gt;)                          #Remaining attributes followed by end of tag
    ~isx"</code><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd>string</dd>
</dl>
</div>
<div class="clear"></div>
</div>
</div>
<h3>Methods</h3>
<div>
<a id="\Swift_Plugin_FileEmbedder::addProtocol()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">addProtocol</span><span class="nb-faded-text">(
          string $prot
          )
        </span>
        :
          void</code><div class="description"><p class="short_description">Add a new protocol which can be used to download files.</p></div>
<div class="code-tabs">
<div class="long-description"><p>Protocols should not include the "://" portion.  This method expects alphanumeric characters only.</p>
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$prot</th>
<td>string</td>
<td><em><p>The protocol name (e.g. http or ftp)</p>
</em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::addType()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">addType</span><span class="nb-faded-text">(
          string $ext, string $type
          )
        </span>
        :
          void</code><div class="description"><p class="short_description">Add a new MIME type defintion (or overwrite an existing one).</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$ext</th>
<td>string</td>
<td><em><p>The extension (sans the dot)</p>
</em></td>
</tr>
<tr>
<th>$type</th>
<td>string</td>
<td><em><p>The MIME type (e.g. image/jpeg)</p>
</em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::beforeSendPerformed()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">beforeSendPerformed</span><span class="nb-faded-text">(
           $e
          )
        </span>
        :
          void</code><div class="description"><p class="short_description">Swift's BeforeSendListener required method.</p></div>
<div class="code-tabs">
<div class="long-description"><p>Runs just before Swift sends a message.  Here is where we do all the replacements.</p>
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$e</th>
<td></td>
<td><em><p>Swift_Events_SendEvent</p></em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::clearCache()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">clearCache</span><span class="nb-faded-text">(
          
          )
        </span>
        :
          void</code><div class="description"><p class="short_description">Empty out the cache of registered files.</p></div>
<div class="code-tabs"><div class="long-description">
</div></div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::embedLocalFile()" class="anchor"></a><div class="method protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"><span class="highlight">embedLocalFile</span><span class="nb-faded-text">(
          array $matches
          )
        </span>
        :
          string</code><div class="description"><p class="short_description">Callback method for preg_replace().</p></div>
<div class="code-tabs">
<div class="long-description"><p>Embeds files which have been found during scanning.</p>
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$matches</th>
<td>array</td>
<td><em><p>Backreferences from preg_replace()</p>
</em></td>
</tr>
</table>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>string</td>
<td>The tag with it's path replaced with a CID</td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::embedRemoteFile()" class="anchor"></a><div class="method protected">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"><span class="highlight">embedRemoteFile</span><span class="nb-faded-text">(
          array $matches
          )
        </span>
        :
          string</code><div class="description"><p class="short_description">Callback method for preg_replace().</p></div>
<div class="code-tabs">
<div class="long-description"><p>Embeds files which have been found during scanning.</p>
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$matches</th>
<td>array</td>
<td><em><p>Backreferences from preg_replace()</p>
</em></td>
</tr>
</table>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>string</td>
<td>The tag with it's URL replaced with a CID</td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::getEmbedLocalFiles()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">getEmbedLocalFiles</span><span class="nb-faded-text">(
          
          )
        </span>
        :
          boolean</code><div class="description"><p class="short_description">Returns true if local files can be embedded, or false if not.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>boolean</td>
<td></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::getEmbedRemoteFiles()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">getEmbedRemoteFiles</span><span class="nb-faded-text">(
          
          )
        </span>
        :
          boolean</code><div class="description"><p class="short_description">Returns true if remote files can be embedded, or false if not.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>boolean</td>
<td></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::getLocalFilePattern()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">getLocalFilePattern</span><span class="nb-faded-text">(
          string $tag_name
          )
        </span>
        :
          string</code><div class="description"><p class="short_description">Get the PCRE pattern for a local file based on the tag name.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$tag_name</th>
<td>string</td>
<td><em><p>The name of the tag</p></em></td>
</tr>
</table>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>string</td>
<td></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::getLocalFilePatternFormat()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">getLocalFilePatternFormat</span><span class="nb-faded-text">(
          
          )
        </span>
        :
          string</code><div class="description"><p class="short_description">Gets the sprintf() format string for the PCRE pattern to scan for remote files.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>string</td>
<td></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::getProtocols()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">getProtocols</span><span class="nb-faded-text">(
          
          )
        </span>
        :
          array</code><div class="description"><p class="short_description">Get a list of all registered protocols.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>array</td>
<td></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::getRemoteFilePattern()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">getRemoteFilePattern</span><span class="nb-faded-text">(
          string $tag_name
          )
        </span>
        :
          string</code><div class="description"><p class="short_description">Get the PCRE pattern for a remote file based on the tag name.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$tag_name</th>
<td>string</td>
<td><em><p>The name of the tag</p></em></td>
</tr>
</table>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>string</td>
<td></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::getRemoteFilePatternFormat()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">getRemoteFilePatternFormat</span><span class="nb-faded-text">(
          
          )
        </span>
        :
          string</code><div class="description"><p class="short_description">Gets the sprintf() format string for the PCRE pattern to scan for remote files.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>string</td>
<td></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::getTagDefinition()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">getTagDefinition</span><span class="nb-faded-text">(
          string $tag
          )
        </span>
        :
          array</code><div class="description"><p class="short_description">Get a tag definition.</p></div>
<div class="code-tabs">
<div class="long-description"><p>Returns an array with indexes "attributes" and "extensions".
Each element is an array listing the values within it.</p>
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$tag</th>
<td>string</td>
<td><em><p>The name of the tag</p></em></td>
</tr>
</table>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>array</td>
<td></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::getType()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">getType</span><span class="nb-faded-text">(
          string $ext
          )
        </span>
        :
          string</code><div class="description"><p class="short_description">Get the MIME type based upon the extension.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$ext</th>
<td>string</td>
<td><em><p>The extension (sans the dot).</p>
</em></td>
</tr>
</table>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>string</td>
<td></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::registerFile()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">registerFile</span><span class="nb-faded-text">(
          string $url, string $cid, <a href="db_tools_swift_Swift_Message_EmbeddedFile.html#%5CSwift_Message_EmbeddedFile">\Swift_Message_EmbeddedFile</a> $file
          )
        </span>
        :
          void</code><div class="description"><p class="short_description">Register a file which has been downloaded so it doesn't need to be downloaded twice.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$url</th>
<td>string</td>
<td><em><p>The remote URL</p></em></td>
</tr>
<tr>
<th>$cid</th>
<td>string</td>
<td><em><p>The ID as attached in the message</p></em></td>
</tr>
<tr>
<th>$file</th>
<td><a href="db_tools_swift_Swift_Message_EmbeddedFile.html#%5CSwift_Message_EmbeddedFile">\Swift_Message_EmbeddedFile</a></td>
<td><em><p>The file object itself</p></em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::removeProtocol()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">removeProtocol</span><span class="nb-faded-text">(
          string $prot
          )
        </span>
        :
          void</code><div class="description"><p class="short_description">Remove a protocol from the list of allowed protocols once added.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$prot</th>
<td>string</td>
<td><em><p>The name of the protocol (e.g. http)</p>
</em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::removeTagDefinition()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">removeTagDefinition</span><span class="nb-faded-text">(
          string $tag
          )
        </span>
        :
          void</code><div class="description"><p class="short_description">Remove a tag definition for remote files.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$tag</th>
<td>string</td>
<td><em><p>The name of the tag</p></em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::setEmbedLocalFiles()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">setEmbedLocalFiles</span><span class="nb-faded-text">(
           $set
          )
        </span>
        :
          void</code><div class="description"><p class="short_description">Turn on or off local file embedding.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$set</th>
<td></td>
<td><em><p>boolean</p></em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::setEmbedRemoteFiles()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">setEmbedRemoteFiles</span><span class="nb-faded-text">(
           $set
          )
        </span>
        :
          void</code><div class="description"><p class="short_description">Turn on or off remote file embedding.</p></div>
<div class="code-tabs">
<div class="long-description">
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$set</th>
<td></td>
<td><em><p>boolean</p></em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::setLocalFilePatternFormat()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">setLocalFilePatternFormat</span><span class="nb-faded-text">(
          string $format
          )
        </span>
        :
          void</code><div class="description"><p class="short_description">Set the PCRE pattern which finds -full- HTML tags and copies the path for a local file into a backreference.</p></div>
<div class="code-tabs">
<div class="long-description"><p>The pattern contains three %s replacements for sprintf().
First replacement is the tag name (e.g. img)
Second replacement is the attribute name (e.g. src)
Third replacement is the file extension (e.g. jpg)
This pattern should contain the full URL in backreference index 3.</p>
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$format</th>
<td>string</td>
<td><em><p>sprintf() format string containing a PCRE regexp.</p>
</em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::setRemoteFilePatternFormat()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">setRemoteFilePatternFormat</span><span class="nb-faded-text">(
          string $format
          )
        </span>
        :
          void</code><div class="description"><p class="short_description">Set the PCRE pattern which finds -full- HTML tags and copies the URL for the remote file into a backreference.</p></div>
<div class="code-tabs">
<div class="long-description"><p>The pattern contains four %s replacements for sprintf().
First replacement is the tag name (e.g. img)
Second replacement is the attribute name (e.g. src)
Third replacement is the protocol (e.g. http)
Fourth replacement is the file extension (e.g. jpg)
This pattern should contain the full URL in backreference index 3.</p>
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$format</th>
<td>string</td>
<td><em><p>sprintf() format string containing a PCRE regexp.</p>
</em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\Swift_Plugin_FileEmbedder::setTagDefinition()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/method.png" alt="method"><img src="images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">setTagDefinition</span><span class="nb-faded-text">(
          string $tag, string $attributes, array $extensions
          )
        </span>
        :
          void</code><div class="description"><p class="short_description">Add, or modify a tag definition.</p></div>
<div class="code-tabs">
<div class="long-description"><p>This affects how the plugins scans for files to download.</p>
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$tag</th>
<td>string</td>
<td><em><p>The name of a tag to search for (e.g. img)</p>
</em></td>
</tr>
<tr>
<th>$attributes</th>
<td>string</td>
<td><em><p>The name of attributes to look for (e.g. src). You can pass an array if there are multiple possibilities.</p>
</em></td>
</tr>
<tr>
<th>$extensions</th>
<td>array</td>
<td><em><p>A list of extensions to allow (sans dot). If there's only one you can just pass a string.</p>
</em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
</div>
</div>
</div>
<small xmlns="" class="footer">Documentation was generated by <a href="http://docblox-project.org">DocBlox 0.15.1</a>.
    </small></body></html>
